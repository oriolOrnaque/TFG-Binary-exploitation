\documentclass[../tfg.tex]{subfiles}

\begin{document}

\begin{tikzpicture}
[stacknode/.style={rectangle, text centered, outer sep=0, minimum width=1.8cm}]

\node (t0) [stacknode] {empty};
\node (t1) [stacknode, fill=green!40, right=0 of t0.east] {@1};
\node (t2a) [stacknode, fill=green!40, right=0 of t1.east] {@1};
\node (t2b) [stacknode, fill=blue!40, above=0 of t2a.north] {@2};
\node (t3) [stacknode, fill=green!40, right=0 of t2a.east] {@1};
\node (t4a) [stacknode, fill=green!40, right=0 of t3.east] {@1};
\node (t4b) [stacknode, fill=red!40, above=0 of t4a.north] {@3};
\node (t5) [stacknode, fill=green!40, right=0 of t4a.east] {@1};
\node (t6) [stacknode, right=0 of t5.east] {empty};

    \draw [<->, thick] (-1, 1.5) node (yaxis) [above] {\textbf{stack}}
    |- (12, -0.5) node (xaxis) [right] {\textbf{time}};

\node (check1) [stacknode, above=0.5 of t0.north east] {\texttt{do\_something()}};
\node (check2) [stacknode, above=1 of t1.north east] {\texttt{do\_something\_a()}};
\node (check3) [stacknode, above=1 of t3.north east] {\texttt{do\_something\_b()}};

\draw [-{Circle}] (check1.south) -- (t0.east);
\draw [-{Circle}] (check2.south) -- (t2b.west);
\draw [-{Circle}] (check3.south) -- (t4b.west);

    \node (push1) [label, below=0.7 of t0.south east] {\texttt{push @1}};
    \node (push2) [label, right=1.8cm of push1.west] {\texttt{push @2}};
    \node (pop2) [label, below=0.7 of t2a.south east] {\texttt{pop @2}};
    \node (push3) [label, below=0.7 of t3.south east] {\texttt{push @3}};
    \node (pop3) [label, below=0.7 of t4a.south east] {\texttt{pop @3}};
    \node (pop1) [label, right=1.8cm of pop3.west] {\texttt{pop @1}};

    \draw [-{Circle}] (push1) -- (t0.east);
    \draw [-{Circle}] (push2) -- (t2b.west);
    \draw [-{Circle}] (pop2) -- (t2b.east);
    \draw [-{Circle}] (push3) -- (t4b.west);
    \draw [-{Circle}] (pop3) -- (t4b.east);
    \draw [-{Circle}] (pop1) -- (t5.east);

\end{tikzpicture}

\end{document}

