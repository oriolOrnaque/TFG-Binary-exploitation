\documentclass[../tfg.tex]{subfile}

\begin{document}

% tcache
\begin{tikzpicture}
[tablename/.style={text centered, minimum width=6cm, minimum height=0.7cm, fill=red!40},
tableidx/.style={text centered, minimum width=2cm, minimum height=0.5cm, fill=cyan!30},
tableent/.style={minimum width=4cm, minimum height=0.5cm, fill=red!20}]

    \node (tcache) [tablename] {tcache};
    \node (list20) [tableidx, below=0cm of tcache.south west, anchor=north west] {\texttt{0x20}};
    \node (values20) [tableent, right=0cm of list20.east] {...};
    \node (list30) [tableidx, below=0cm of list20.south] {\texttt{0x30}};
    \node (values30) [tableent, right=0cm of list30.east] {...};
    \node (list40) [tableidx, below=0cm of list30.south] {\texttt{0x40}};
    \node (values40) [tableent, right=0cm of list40.east] {...};
    \node (list50) [tableidx, below=0cm of list40.south] {\texttt{0x50}};
    \node (values50) [tableent, right=0cm of list50.east] {\texttt{0x55aabb}};

\end{tikzpicture}

\vspace{1cm}

% heap
\begin{tikzpicture}
[chunk/.style={minimum height=1cm, text centered, rectangle}]

\node (something) [chunk, fill=cyan!20, minimum width=3cm] {...};
\node (freed) [chunk, fill=cyan!10, right=0cm of something.east] {freed chunk};
\node (nss) [chunk, fill=cyan!20, right=0cm of freed.east] {\emph{group:files} service};

\node (addr) [above=0.5cm of freed.north west, text centered] {\texttt{0x55aabb}};

\draw [-{Latex[round]}] (addr.south) -- (freed.north west);

\end{tikzpicture}

\begin{lstlisting}
user_args = malloc(0x50); /* return chunk from tcache */
\end{lstlisting}

% heap
\begin{tikzpicture}
[chunk/.style={minimum height=1cm, text centered, rectangle}]

\node (something) [chunk, fill=cyan!20, minimum width=3cm] {...};
\node (freed) [chunk, fill=red!30, right=0cm of something.east] {\texttt{user\_args}};
\node (nss) [chunk, fill=cyan!20, right=0cm of freed.east] {\emph{group:files} service};

\node (addr) [above=0.5cm of freed.north west, text centered] {\texttt{0x55aabb}};

\draw [-{Latex[round]}] (addr.south) -- (freed.north west);

\end{tikzpicture}

\end{document}
